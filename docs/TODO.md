# BookCabinet ‚Äî –¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏ (TODO)

> –≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏. Claude —á–∏—Ç–∞–µ—Ç –µ–≥–æ –≤ –Ω–∞—á–∞–ª–µ —Å–µ—Å—Å–∏–∏ —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç.

---

## üî• –°—Ä–æ—á–Ω–æ / –í –ø—Ä–æ—Ü–µ—Å—Å–µ

### [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å udev rules –¥–ª—è RFID —Å—á–∏—Ç—ã–≤–∞—Ç–µ–ª–µ–π
- **–ü—Ä–æ–±–ª–µ–º–∞:** /dev/ttyUSB0 –∏ /dev/ttyUSB1 ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ, –∑–∞–≤–∏—Å—è—Ç –æ—Ç –ø–æ—Ä—è–¥–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **–†–µ—à–µ–Ω–∏–µ:** —Å–æ–∑–¥–∞—Ç—å —Å–∏–º–ª–∏–Ω–∫–∏ –ø–æ VID/PID —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- **–ü—Ä–æ–±–ª–µ–º–∞ 2:** –û–±–∞ —Å—á–∏—Ç—ã–≤–∞—Ç–µ–ª—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç CP2102 —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º VID/PID (10c4:ea60) –∏ Serial "0001"
- **–†–µ—à–µ–Ω–∏–µ 2:** –ü—Ä–∏–≤—è–∑–∫–∞ –ø–æ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É USB –ø–æ—Ä—Ç—É (KERNELS)
- **–§–∞–π–ª:** `/etc/udev/rules.d/99-rfid-readers.rules`
- **–®–∞–≥–∏:**
  1. `udevadm info -a /dev/ttyUSB0 | grep KERNELS` ‚Äî —É–∑–Ω–∞—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—Ç
  2. –°–æ–∑–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –ø–æ KERNELS
  3. –û–±–Ω–æ–≤–∏—Ç—å config.py –Ω–∞ /dev/rfid_card, /dev/rfid_book

### [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å irbisConnected –≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç `not IRBIS['mock']` –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **–§–∞–π–ª:** `bookcabinet/server/api_routes.py` ‚Üí `get_diagnostics()`
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–µ–∞–ª—å–Ω–æ–µ TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ 172.29.67.70:6666
- **–í–∞–∂–Ω–æ:** RPi –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å–µ—Ç–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ò–†–ë–ò–°

### [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è frontend —Å card_detected —Å–æ–±—ã—Ç–∏–µ–º
- WebSocket –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `{type: 'card_detected', uid: '...', source: 'nfc'|'uhf'}`
- Frontend –¥–æ–ª–∂–µ–Ω –≤—ã–∑–≤–∞—Ç—å `/api/auth/card` —Å –ø–æ–ª—É—á–µ–Ω–Ω—ã–º uid
- –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

---

## üìã –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ

### [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ò–†–ë–ò–°
- –†–µ—Ñ–µ—Ä–µ–Ω—Å: github.com/valinerosgordov/RFIDShkafWithIRBIS
- TCP –ø–æ—Ä—Ç 6666, –∫–æ–¥–∏—Ä–æ–≤–∫–∞ cp1251
- RPi –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –ø–æ–¥—Å–µ—Ç–∏ 172.29.x.x
- –ù—É–∂–Ω–æ: –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–∏—Ç–∞—Ç–µ–ª—è, –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–Ω–∏–≥–∏, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—ã–¥–∞—á–∏/–≤–æ–∑–≤—Ä–∞—Ç–∞

### [ ] –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ –∫–∞—Ä—Ç–µ (NFC + UHF) ‚úÖ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏ –≤–Ω—É—Ç—Ä–∏ —à–∫–∞—Ñ–∞ (RRU9816) ‚úÖ –¥—Ä–∞–π–≤–µ—Ä –≥–æ—Ç–æ–≤
- –ú–µ—Ö–∞–Ω–∏–∫–∞ –≤—ã–¥–∞—á–∏/–≤–æ–∑–≤—Ä–∞—Ç–∞ ‚Äî –Ω—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- –ó–∞–ø–∏—Å—å –≤ –ò–†–ë–ò–° ‚Äî –Ω–µ –Ω–∞—á–∞—Ç–æ

### [ ] –î—Ä–∞–π–≤–µ—Ä RRU9816 –¥–ª—è –∫–Ω–∏–≥ –≤–Ω—É—Ç—Ä–∏ —à–∫–∞—Ñ–∞
- –ü–æ—Ä—Ç: /dev/ttyUSB1 ‚Üí –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ /dev/rfid_book –ø–æ—Å–ª–µ udev
- –ü—Ä–æ—Ç–æ–∫–æ–ª: —Ä–µ–≤–µ—Ä—Å–Ω—É—Ç, –¥—Ä–∞–π–≤–µ—Ä –≥–æ—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–Ω–∏–≥

### [ ] USB WiFi –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è RPi3
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π WiFi —á–∏–ø –ø–æ–≤—Ä–µ–∂–¥—ë–Ω (BCM43430)
- –ù—É–∂–µ–Ω USB –∞–¥–∞–ø—Ç–µ—Ä (TP-Link TL-WN725N –∏–ª–∏ –∞–Ω–∞–ª–æ–≥)
- –ò–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Ethernet

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω UnifiedCardReader –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –æ–ø—Ä–æ—Å–∞ NFC + UHF –∫–∞—Ä—Ç
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ main.py —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Å–æ–±—ã—Ç–∏–π —á–µ—Ä–µ–∑ WebSocket
- [x] –û–±–Ω–æ–≤–ª—ë–Ω config.py —Å dual-reader –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ RFID
- [x] –°–æ–∑–¥–∞–Ω –¥—Ä–∞–π–≤–µ—Ä iqrfid5102_driver.py
- [x] –°–æ–∑–¥–∞–Ω –¥—Ä–∞–π–≤–µ—Ä rru9816_driver.py (—Ä–µ–≤–µ—Ä—Å –ø—Ä–æ—Ç–æ–∫–æ–ª–∞!)
- [x] –ù–∞–π–¥–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª RFID UHF (0xA0)
- [x] –ù–∞—Å—Ç—Ä–æ–µ–Ω —Ç–∞—á—Å–∫—Ä–∏–Ω (–∏–Ω–≤–µ—Ä—Å–∏—è Y)
- [x] –î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ WiFi (—á–∏–ø –ø–æ–≤—Ä–µ–∂–¥—ë–Ω –æ—Ç –ø–æ–¥-–Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è)
- [x] –°–æ–∑–¥–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (QUICKSTART, DEVLOG, TODO)
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã RFID —Å —Ç–∞–π–º–∞—É—Ç–æ–º (read-card, read-book endpoints)
- [x] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ RFID –≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- [x] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω unified_card_reader.get_status() ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è API
- [x] Systemd —Å–µ—Ä–≤–∏—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å MOCK_MODE=false
- [x] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–∏: NFC=off, UHF=—Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üí° –ò–¥–µ–∏ –Ω–∞ –±—É–¥—É—â–µ–µ

- [ ] –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ GPIO (–≤–º–µ—Å—Ç–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è config.py)
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –ë–î
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É (Telegram?)
- [ ] –†–µ–∑–µ—Ä–≤–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ –ò–†–ë–ò–°

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2026-01-13*
