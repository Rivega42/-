# BookCabinet ‚Äî –¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏ (TODO)

> –≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏. Claude —á–∏—Ç–∞–µ—Ç –µ–≥–æ –≤ –Ω–∞—á–∞–ª–µ —Å–µ—Å—Å–∏–∏ —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç.

---

## üî• –°—Ä–æ—á–Ω–æ / –í –ø—Ä–æ—Ü–µ—Å—Å–µ

### [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ø–∏—Ç–∞–Ω–∏–µ –¥–∞—Ç—á–∏–∫–æ–≤ –Ω–∞ 3.3V
- **–í–ê–ñ–ù–û:** –î–∞—Ç—á–∏–∫–∏ TCST2103 –¥–æ–ª–∂–Ω—ã –ø–∏—Ç–∞—Ç—å—Å—è –æ—Ç **3.3V RPi**, –ù–ï –æ—Ç 5V!
- Y_BEGIN –∏ Y_END —É–∂–µ –Ω–∞ 3.3V ‚Äî —à—É–º –∏—Å—á–µ–∑
- **–û—Å—Ç–∞–ª–æ—Å—å:** X_BEGIN, X_END, TRAY_BEGIN, TRAY_END
- –ü–æ—Å–ª–µ –ø–µ—Ä–µ–Ω–æ—Å–∞ ‚Äî –ø–µ—Ä–µ–∫–∞–ª–∏–±—Ä–æ–≤–∞—Ç—å –≤—Å–µ –¥–∞—Ç—á–∏–∫–∏

### [ ] –ü–†–û–ë–õ–ï–ú–ê –°–û –°–¢–ï–ö–õ–û–ú 8–º–º ‚Äî —Å—á–∏—Ç—ã–≤–∞—Ç–µ–ª–∏ –Ω–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!
- **–ö—Ä–∏—Ç–∏—á–Ω–æ:** IQRFID-5102 —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ 3-5—Å–º, —á–µ—Ä–µ–∑ —Å—Ç–µ–∫–ª–æ –Ω–µ –ø—Ä–æ–±—å—ë—Ç
- **–í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è:**
  1. –í—ã—Ä–µ–∑–∞—Ç—å –æ–∫–Ω–∞ –≤ —Å—Ç–µ–∫–ª–µ (–∑–∞–∫—Ä—ã—Ç—å —Ç–æ–Ω–∫–∏–º –ø–ª–∞—Å—Ç–∏–∫–æ–º)
  2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—ã–Ω–æ—Å–Ω—ã–µ –∞–Ω—Ç–µ–Ω–Ω—ã
  3. –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å—á–∏—Ç—ã–≤–∞—Ç–µ–ª–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∞–Ω—Ç–µ–Ω–Ω–∞–º–∏

### [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å irbisConnected –≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç `not IRBIS['mock']` –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **–§–∞–π–ª:** `bookcabinet/server/api_routes.py` ‚Üí `get_diagnostics()`
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–µ–∞–ª—å–Ω–æ–µ TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ 172.29.67.70:6666
- **–í–∞–∂–Ω–æ:** RPi –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å–µ—Ç–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ò–†–ë–ò–°

### [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è frontend —Å card_detected —Å–æ–±—ã—Ç–∏–µ–º
- WebSocket –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `{type: 'card_detected', uid: '...', source: 'nfc'|'uhf'}`
- Frontend –¥–æ–ª–∂–µ–Ω –≤—ã–∑–≤–∞—Ç—å `/api/auth/card` —Å –ø–æ–ª—É—á–µ–Ω–Ω—ã–º uid
- –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

---

## üìã –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ

### [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ò–†–ë–ò–°
- –†–µ—Ñ–µ—Ä–µ–Ω—Å: github.com/valinerosgordov/RFIDShkafWithIRBIS
- TCP –ø–æ—Ä—Ç 6666, –∫–æ–¥–∏—Ä–æ–≤–∫–∞ cp1251
- RPi –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –ø–æ–¥—Å–µ—Ç–∏ 172.29.x.x
- –ù—É–∂–Ω–æ: –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–∏—Ç–∞—Ç–µ–ª—è, –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–Ω–∏–≥–∏, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—ã–¥–∞—á–∏/–≤–æ–∑–≤—Ä–∞—Ç–∞

### [ ] –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ –∫–∞—Ä—Ç–µ (NFC + UHF) ‚úÖ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏ –≤–Ω—É—Ç—Ä–∏ —à–∫–∞—Ñ–∞ (RRU9816) ‚úÖ –¥—Ä–∞–π–≤–µ—Ä –≥–æ—Ç–æ–≤
- –ú–µ—Ö–∞–Ω–∏–∫–∞ –≤—ã–¥–∞—á–∏/–≤–æ–∑–≤—Ä–∞—Ç–∞ ‚Äî –Ω—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- –ó–∞–ø–∏—Å—å –≤ –ò–†–ë–ò–° ‚Äî –Ω–µ –Ω–∞—á–∞—Ç–æ

### [ ] USB WiFi –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è RPi3
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π WiFi —á–∏–ø –ø–æ–≤—Ä–µ–∂–¥—ë–Ω (BCM43430)
- –ù—É–∂–µ–Ω USB –∞–¥–∞–ø—Ç–µ—Ä (TP-Link TL-WN725N –∏–ª–∏ –∞–Ω–∞–ª–æ–≥)
- –ò–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Ethernet

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 14.01.2026 ‚Äî –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –¥–∞—Ç—á–∏–∫–æ–≤ TCST2103
- [x] –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ tools/test_sensors.py
- [x] –ü–æ—à–∞–≥–æ–≤–∞—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ –∫–∞–∂–¥–æ–≥–æ –¥–∞—Ç—á–∏–∫–∞ (--step)
- [x] –ê—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–π debounce (–±—ã—Å—Ç—Ä–æ–µ ON, –º–µ–¥–ª–µ–Ω–Ω–æ–µ OFF)
- [x] **–ù–ê–ô–î–ï–ù–ê –ü–†–ò–ß–ò–ù–ê –®–£–ú–ê: –ø–∏—Ç–∞–Ω–∏–µ 5V –≤–º–µ—Å—Ç–æ 3.3V!**
- [x] Y_BEGIN –∏ Y_END –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ 3.3V ‚Äî —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

### 14.01.2026 ‚Äî RFID —Å–∏—Å—Ç–µ–º–∞
- [x] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å udev rules –¥–ª—è RFID —Å—á–∏—Ç—ã–≤–∞—Ç–µ–ª–µ–π
- [x] –ò—Å–ø—Ä–∞–≤–∏—Ç—å NFC —Å—á–∏—Ç—ã–≤–∞—Ç–µ–ª—å (–ø—Ä–æ–±–ª–µ–º–∞ —Å 3 –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏ ACR1281)
- [x] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–≥ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–æ—Å–ª–µ disconnect()
- [x] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ RFID —Å—á–∏—Ç—ã–≤–∞—Ç–µ–ª–∏:
  - NFC ACR1281: —Ä–∞–±–æ—Ç–∞–µ—Ç, –¥–∞–ª—å–Ω–æ—Å—Ç—å 5-10—Å–º
  - UHF IQRFID-5102: —Ä–∞–±–æ—Ç–∞–µ—Ç, –¥–∞–ª—å–Ω–æ—Å—Ç—å 3-5—Å–º (–∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ)
  - RRU9816: –ø–æ–¥–∫–ª—é—á–µ–Ω
- [x] –ü–æ–ø—ã—Ç–∫–∞ —É–≤–µ–ª–∏—á–∏—Ç—å –º–æ—â–Ω–æ—Å—Ç—å (–Ω–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –¥–ª—è IQRFID-5102)

### –†–∞–Ω–µ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω UnifiedCardReader –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –æ–ø—Ä–æ—Å–∞ NFC + UHF –∫–∞—Ä—Ç
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ main.py —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Å–æ–±—ã—Ç–∏–π —á–µ—Ä–µ–∑ WebSocket
- [x] –û–±–Ω–æ–≤–ª—ë–Ω config.py —Å dual-reader –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ RFID
- [x] –°–æ–∑–¥–∞–Ω –¥—Ä–∞–π–≤–µ—Ä iqrfid5102_driver.py (+ –ø–æ–ø—ã—Ç–∫–∞ –¥–æ–±–∞–≤–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ—â–Ω–æ—Å—Ç—å—é)
- [x] –°–æ–∑–¥–∞–Ω –¥—Ä–∞–π–≤–µ—Ä rru9816_driver.py (—Ä–µ–≤–µ—Ä—Å –ø—Ä–æ—Ç–æ–∫–æ–ª–∞!)
- [x] –ù–∞–π–¥–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª RFID UHF (0xA0 –¥–ª—è –∫–æ–º–∞–Ω–¥, –Ω–æ –æ—Å–Ω–æ–≤–Ω–æ–π —Å CRC-16)
- [x] –ù–∞—Å—Ç—Ä–æ–µ–Ω —Ç–∞—á—Å–∫—Ä–∏–Ω (–∏–Ω–≤–µ—Ä—Å–∏—è Y)
- [x] –î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ WiFi (—á–∏–ø –ø–æ–≤—Ä–µ–∂–¥—ë–Ω –æ—Ç –ø–æ–¥-–Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è)
- [x] –°–æ–∑–¥–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (QUICKSTART, DEVLOG, TODO)
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã RFID —Å —Ç–∞–π–º–∞—É—Ç–æ–º (read-card, read-book endpoints)
- [x] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ RFID –≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- [x] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω unified_card_reader.get_status() ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è API
- [x] Systemd —Å–µ—Ä–≤–∏—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å MOCK_MODE=false
- [x] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–∏

---

## üí° –ò–¥–µ–∏ –Ω–∞ –±—É–¥—É—â–µ–µ

- [ ] –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ GPIO (–≤–º–µ—Å—Ç–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è config.py)
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –ë–î
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É (Telegram?)
- [ ] –†–µ–∑–µ—Ä–≤–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ –ò–†–ë–ò–°
- [ ] –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–º–µ–Ω—É IQRFID-5102 –Ω–∞ –º–æ–¥–µ–ª—å —Å –≤–Ω–µ—à–Ω–µ–π –∞–Ω—Ç–µ–Ω–Ω–æ–π

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2026-01-14*
